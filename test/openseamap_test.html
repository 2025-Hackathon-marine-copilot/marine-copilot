<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>그리드 기반 지도</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([35.0885, 129.0885], 13); // 지도 초기 위치 설정

        // OpenSeaMap 레이어 추가
        var osmLayer = L.tileLayer('https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenSeaMap contributors'
        }).addTo(map);

        var baseLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // 그리드 생성할 좌표 범위
        var latMin = 35.068818, latMax = 35.107586;
        var lonMin = 129.059481, lonMax = 129.117633;

        var gridSize = 0.002423; // 정사각형 한 변의 크기 (약 0.005도)

        // 그리드 생성
        for (var lat = latMin; lat < latMax; lat += gridSize) {
            for (var lon = lonMin; lon < lonMax; lon += gridSize) {
                var square = [
                    [lat, lon],
                    [lat + gridSize, lon],
                    [lat + gridSize, lon + gridSize],
                    [lat, lon + gridSize]
                ];
                L.polygon(square, { color: 'blue', weight: 1, fillOpacity: 0.1 }).addTo(map);
            }
        }

        // 지도 더블 클릭 시 위도, 경도 콘솔에 출력 및 마커 표시
        map.on('dblclick', function(e) {
            console.log("위도: " + e.latlng.lat + ", 경도: " + e.latlng.lng);
            L.marker(e.latlng).addTo(map).bindPopup("위도: " + e.latlng.lat + "<br>경도: " + e.latlng.lng).openPopup();
        });
    </script>
</body>
</html>
